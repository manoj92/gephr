# Repository Guidelines

## Project Structure & Module Organization
Frontend entrypoint `App.tsx` loads modules from `src/` (components, screens, navigation, services, store, utils) with shared assets in `assets/`. The ejected React Native workspace in `HumanoidTrainingPlatform/` houses native build scripts, Expo config, and Jest setup; edit it only when native behavior changes. Backend code lives in `backend/app` (api, models, schemas, services) with deployments under `backend/deploy` and AWS helpers such as `lambda_code.py`. Tests sit in `backend/tests` and `HumanoidTrainingPlatform/__tests__`, and root scripts like `start-*.sh` orchestrate local tooling.

## Build, Test, and Development Commands
- `./start-dev.sh` provisions the virtualenv, seeds the database, and launches both FastAPI and Expo.
- `./start-backend.sh` starts only the API; alternatively run `cd backend && uvicorn app.main:app --reload`.
- `npm install && npm run start` serves the Expo client using the root `src/` code.
- `cd HumanoidTrainingPlatform && npm run lint && npm run test:ci` keeps React Native linting, types, and Jest green.
- `cd backend && source venv/bin/activate && python run_tests.py` executes pytest with coverage and async support.

## Coding Style & Naming Conventions
TypeScript files use two-space indentation, PascalCase components (`src/components/RobotPanel.tsx`), camelCase hooks and services, and SCREAMING_SNAKE_CASE constants in `src/constants`. Run `npm run lint` and `npm run typecheck` before raising a PR; the ESLint config enforces import order and React Navigation patterns. Python modules stick to PEP 8 with four-space indentation, snake_case filenames, and typed FastAPI routers grouped under `app/api/v1`; keep response models in `app/schemas` and reuse services from `app/services`.

## Testing Guidelines
Pytest discovers files named `backend/tests/test_<feature>.py`; tag async cases with `@pytest.mark.asyncio` and review the `htmlcov/index.html` coverage report generated by `python run_tests.py`. Jest uses the configuration in `HumanoidTrainingPlatform/package.json`, so colocate component specs under `HumanoidTrainingPlatform/__tests__/ComponentName.test.tsx` and rely on Testing Library queries. Expo-only smoke tests can live in `src/__tests__/` and be run with `npm run test` or `npm run test:watch`.

## Commit & Pull Request Guidelines
Git history follows Conventional Commits (`feat:`, `fix:`, `docs:`); include a scope when clarifying surface areas (`feat(api): add training session audit log`). Every PR links the relevant issue, completes the template checklist, rebases on `main`, and confirms `npm run lint`, `npm run typecheck`, and `python run_tests.py` before requesting review.

## Environment & Configuration Tips
Copy `.env.example` to `.env` in the repository root and `backend/` before starting servers, supplying local `DATABASE_URL`, `REDIS_URL`, and Expo tokens. Guard keystores and credentials (`HumanoidTrainingPlatform/credentials.json`, `aws-deployment/`), and rerun `setup-dev.sh` when provisioning a fresh machine to install prerequisites.
